<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TYZM-614: Yazılım Kalite Güvencesi ve Standartlar - Sınav</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            max-width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .header {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .exam-controls {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .progress-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .progress-bar {
            width: 200px;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 0.3s ease;
            width: 0%;
        }

        .question-container {
            padding: 30px;
            min-height: 500px !important;
            display: block !important;
            visibility: visible !important;
        }

        .question {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            width: 100% !important;
            min-height: 300px !important;
            position: relative !important;
        }

        .question-header {
            margin-bottom: 25px;
            display: block;
            visibility: visible;
        }

        .week-info {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .question-number {
            color: #2196F3;
            font-weight: bold;
            font-size: 1.1em;
            display: block;
        }

        .question-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin: 15px 0;
            color: #333;
            display: block;
            visibility: visible;
        }

        .options {
            margin: 25px 0;
            display: block;
            visibility: visible;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            visibility: visible;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #2196F3;
            transform: translateX(5px);
        }

        .option.selected {
            background: #2196F3;
            color: white;
            border-color: #1976D2;
        }

        .option.correct {
            background: #4CAF50;
            color: white;
            border-color: #45a049;
        }

        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #d32f2f;
        }

        .option-letter {
            font-weight: bold;
            font-size: 1.1em;
            min-width: 25px;
            display: inline-block;
        }

        .option-text {
            flex: 1;
            display: inline-block;
        }

        .loading-container {
            text-align: center;
            padding: 40px;
            display: block;
            visibility: visible;
        }

        .loading-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #333;
        }

        .loading-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px auto;
            width: 200px;
        }

        .loading-progress {
            background: #2196F3;
            height: 100%;
            width: 60%;
            animation: loading 2s infinite;
        }

        .manual-load-btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin-top: 15px;
            cursor: pointer;
            font-size: 1em;
        }

        .manual-start-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 15px;
        }

        .error-message {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #f44336;
        }

        .error-description {
            margin: 15px 0;
            color: #666;
            line-height: 1.5;
        }

        .help-text {
            margin-top: 15px;
            font-size: 0.9em;
            color: #888;
        }

        @keyframes loading {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(300%); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            margin-bottom: 25px;
        }

        .question-number {
            color: #2196F3;
            font-weight: bold;
            font-size: 1.1em;
        }

        .question-text {
            font-size: 1.2em;
            line-height: 1.6;
            margin: 15px 0;
            color: #333;
        }

        .week-info {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .diagram {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .spiral-diagram {
            text-align: center;
            line-height: 2;
        }

        .structure-chart {
            text-align: center;
            line-height: 1.8;
        }

        .bathtub-curve {
            text-align: left;
            line-height: 1.5;
        }

        .options {
            margin: 25px 0;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #2196F3;
            transform: translateX(5px);
        }

        .option.selected {
            background: #2196F3;
            color: white;
            border-color: #1976D2;
        }

        .option.correct {
            background: #4CAF50;
            color: white;
            border-color: #45a049;
        }

        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #d32f2f;
        }

        .option-letter {
            font-weight: bold;
            font-size: 1.1em;
            min-width: 25px;
        }

        .navigation {
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #2196F3;
            color: white;
        }

        .btn-primary:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .results.show {
            display: block;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            font-weight: bold;
            color: white;
        }

        .score-excellent { background: linear-gradient(135deg, #4CAF50, #45a049); }
        .score-good { background: linear-gradient(135deg, #2196F3, #1976D2); }
        .score-average { background: linear-gradient(135deg, #FF9800, #F57C00); }
        .score-poor { background: linear-gradient(135deg, #f44336, #d32f2f); }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #2196F3;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .week-breakdown {
            margin: 30px 0;
            text-align: left;
        }

        .week-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .answer-review {
            display: none;
            margin-top: 30px;
        }

        .answer-review.show {
            display: block;
        }

        .review-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #e9ecef;
        }

        .review-item.correct {
            border-left-color: #4CAF50;
        }

        .review-item.incorrect {
            border-left-color: #f44336;
        }

        .review-question {
            font-weight: bold;
            margin-bottom: 10px;
        }

        .review-answer {
            margin: 5px 0;
        }

        .review-explanation {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.95em;
        }

        @media (max-width: 768px) {
            body {
                padding: 5px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                background-attachment: fixed;
            }
            
            .container {
                margin: 0;
                border-radius: 10px;
                width: calc(100% - 10px);
                max-width: 100%;
                margin: 5px auto;
            }
            
            .header {
                padding: 12px 8px;
            }
            
            .header h1 {
                font-size: 1.1em;
                line-height: 1.2;
                margin-bottom: 5px;
                word-wrap: break-word;
            }
            
            .header p {
                font-size: 0.75em;
                line-height: 1.2;
                word-wrap: break-word;
            }
            
            .question-container {
                padding: 8px;
                min-height: auto !important;
            }
            
            .question-text {
                font-size: 0.85em;
                line-height: 1.3;
                margin: 8px 0;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            .exam-controls {
                flex-direction: column;
                align-items: stretch;
                padding: 8px;
                gap: 6px;
            }
            
            .progress-info {
                flex-direction: column;
                gap: 6px;
                align-items: stretch;
                text-align: center;
            }
            
            .progress-bar {
                width: 100%;
                height: 6px;
            }
            
            .option {
                padding: 8px 10px;
                margin: 4px 0;
                gap: 6px;
                word-wrap: break-word;
            }
            
            .option-text {
                font-size: 0.8em;
                line-height: 1.2;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            .option-letter {
                font-size: 0.9em;
                min-width: 18px;
            }
            
            .navigation {
                padding: 8px;
                flex-direction: column;
                gap: 8px;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
                padding: 10px 12px;
                font-size: 0.9em;
            }
            
            .results {
                padding: 15px 8px;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .week-info {
                font-size: 0.7em;
                padding: 3px 6px;
            }
            
            .diagram {
                font-size: 0.7em;
                padding: 8px;
                margin: 8px 0;
                overflow-x: auto;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 2px;
            }
            
            .container {
                border-radius: 8px;
                margin: 2px auto;
                width: calc(100% - 4px);
            }
            
            .header {
                padding: 10px 6px;
            }
            
            .header h1 {
                font-size: 0.95em;
                margin-bottom: 3px;
                word-wrap: break-word;
            }
            
            .header p {
                font-size: 0.65em;
                line-height: 1.1;
                word-wrap: break-word;
            }
            
            .question-container {
                padding: 6px;
            }
            
            .question-text {
                font-size: 0.75em;
                line-height: 1.2;
                margin: 6px 0;
            }
            
            .option {
                padding: 6px 8px;
                margin: 3px 0;
                gap: 4px;
            }
            
            .option-text {
                font-size: 0.7em;
                line-height: 1.1;
            }
            
            .option-letter {
                font-size: 0.8em;
                min-width: 15px;
            }
            
            .stats {
                grid-template-columns: 1fr;
                gap: 6px;
            }
            
            .stat-card {
                padding: 10px;
            }
            
            .btn {
                padding: 8px 10px;
                font-size: 0.8em;
            }
            
            .exam-controls {
                padding: 6px;
                gap: 4px;
            }
            
            .navigation {
                padding: 6px;
                gap: 6px;
            }
            
            .week-info {
                font-size: 0.6em;
                padding: 2px 4px;
            }
            
            .diagram {
                font-size: 0.6em;
                padding: 6px;
                margin: 6px 0;
            }
            
            .spiral-diagram, .structure-chart, .bathtub-curve {
                font-size: 0.55em;
                line-height: 1.1;
            }
        }
            
            .stat-card {
                padding: 10px;
            }
            
            .btn {
                padding: 8px 10px;
                font-size: 0.8em;
            }
            
            .exam-controls {
                padding: 6px;
                gap: 4px;
            }
            
            .navigation {
                padding: 6px;
                gap: 6px;
            }
            
            .week-info {
                font-size: 0.6em;
                padding: 2px 4px;
            }
            
            .diagram {
                font-size: 0.6em;
                padding: 6px;
                margin: 6px 0;
            }
            
            .spiral-diagram, .structure-chart, .bathtub-curve {
                font-size: 0.55em;
                line-height: 1.1;
            }
        }

        /* Classes to replace inline styles */
        .browser-info {
            font-size: 0.8em;
            margin-top: 10px;
            opacity: 0.7;
        }

        .hidden-btn {
            display: none;
            margin-left: 10px;
        }

        .hidden-element {
            display: none;
        }

        .diagram-title {
            font-weight: bold;
            margin-bottom: 15px;
        }

        .diagram-subtitle {
            margin-top: 10px;
            font-style: italic;
        }

        .result-actions {
            margin-top: 30px;
        }

        .restart-btn {
            margin-left: 15px;
        }

        /* Enhanced correct/incorrect answer styling */
        .option.correct {
            background: #4CAF50 !important;
            color: white !important;
            border-color: #45a049 !important;
        }

        .option.incorrect {
            background: #f44336 !important;
            color: white !important;
            border-color: #d32f2f !important;
        }

        .option.user-incorrect {
            background: #f44336 !important;
            color: white !important;
            border-color: #d32f2f !important;
        }

        .option.user-correct {
            background: #4CAF50 !important;
            color: white !important;
            border-color: #45a049 !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>TYZM-614</h1>
            <p>Yazılım Kalite Güvencesi ve Standartlar - Kapsamlı Sınav</p>
            <!-- WhatsApp Browser Detection -->
            <div id="browser-info" class="browser-info"></div>
        </div>

        <div class="exam-controls">
            <div class="progress-info">
                <span id="progress-text">Soru 1 / 42</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
            </div>
            <div>
                <button type="button" class="btn btn-secondary" id="answer-mode-btn">
                    Cevapları Göster
                </button>
                <button type="button" class="btn btn-primary hidden-btn" id="debug-btn">
                    Yeniden Yükle
                </button>
            </div>
        </div>

        <div class="question-container" id="question-container">
            <!-- Loading placeholder for WhatsApp -->
            <div id="loading-placeholder" class="loading-container">
                <div class="loading-title">Sorular yükleniyor...</div>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                <button type="button" id="force-load-btn" class="manual-load-btn">
                    Soruları Yükle
                </button>
            </div>
        </div>

        <div class="navigation">
            <button type="button" class="btn btn-secondary" id="prev-btn" disabled>
                ← Önceki
            </button>
            <div>
                <button type="button" class="btn btn-primary hidden-element" id="finish-btn">
                    Sınavı Bitir
                </button>
            </div>
            <button type="button" class="btn btn-primary" id="next-btn">
                Sonraki →
            </button>
        </div>

        <div class="results" id="results">
            <!-- Sonuçlar buraya gelecek -->
        </div>
    </div>

    <script>
        const questions = [
            {
                id: 1,
                week: "Hafta 1",
                text: "Aşağıdakilerden hangisi yazılım güvenilirliğin temel kavramı değildir?",
                options: [
                    "Hata",
                    "Kusur", 
                    "Arıza",
                    "Aksaklık",
                    "Zamanda Gecikme"
                ],
                correct: 4,
                explanation: "Yazılım güvenilirliği hata, kusur ve arıza üçlüsüyle tanımlanır. Zamanda gecikme bir performans sorunudur, temel bir güvenilirlik kavramı değildir."
            },
            {
                id: 2,
                week: "Hafta 1",
                text: "Aşağıdakilerden hangisi sağlamlık veya sürdürülebilirlik gibi fonksiyonel ve işlevsel olmayan gereksinimlerin ele alınmasıyla ilgilenen süreçtir?",
                options: [
                    "Yazılım Kalite Güvencesi",
                    "Yazılım İşlevsel Kalitesi",
                    "Yazılım Yapısal Kalitesi",
                    "Yazılım Kalite Kontrolü",
                    "Hiçbiri"
                ],
                correct: 2,
                explanation: "Yazılım Yapısal Kalitesi, sağlamlık ve sürdürülebilirlik gibi işlevsel olmayan gereksinimleri ele alır."
            },
            {
                id: 3,
                week: "Hafta 1",
                text: "I. Test aşamasında bir aksaklık vardı.\nII. Bu tasarımcı hatasıdır.\nIII. Sistem bozuldu.\nIV. Alt sistem denetiminde arıza olduğunu raporlamışlar.\n\nYukarıda verilen örnek cümlelerin hangisinde hata sonucu, çalıştırılan kusurdan kaynaklıdır?",
                options: [
                    "I ve II",
                    "Yalnız I",
                    "III ve IV",
                    "Yalnız IV",
                    "Hepsi"
                ],
                correct: 4,
                explanation: "Verilen tüm cümleler, hata (insan eylemi), kusur/aksaklık (koddaki sorun) ve arıza (sistemin çökmesi) arasındaki ilişkiyi farklı açılardan ifade eder."
            },
            {
                id: 4,
                week: "Hafta 2",
                text: "Bilgisayar operatörü olan Grace Hopper'in bulduğu ilk \"hata\" aşağıdakilerden hangisidir?",
                options: [
                    "Bug",
                    "Failure",
                    "Kusur",
                    "Debug",
                    "Hata"
                ],
                correct: 0,
                explanation: "Grace Hopper'ın bulduğu güve, bilgisayar terminolojisine \"bug\" (böcek) olarak geçmiştir."
            },
            {
                id: 5,
                week: "Hafta 2",
                text: "Yanlış bir sonuç üreten bir insan eylemi aşağıdakilerden hangisidir?",
                options: [
                    "Bug",
                    "Hata",
                    "Kusur",
                    "Debug",
                    "Arıza"
                ],
                correct: 1,
                explanation: "ISO 24765 standardına göre \"Hata\", yanlış bir sonuç üreten bir insan eylemidir."
            },
            {
                id: 6,
                week: "Hafta 2",
                text: "I. Kusurların çalıştırılması, sistemin arızalanmasına neden olabilir.\nII. Hataları debug'lar oluşturur.\nIII. Arızalar sadece söz dizim hatalarından dolayı oluşur.\nIV. Arıza, bir işlevin çalışma yeteneğinin yitirilmesidir.\n\nYukarıdaki ifadelere göre, aşağıdakilerden hangisi doğrudur?",
                options: [
                    "I, II ve IV",
                    "II ve III",
                    "I ve IV",
                    "I ve II",
                    "sadece I"
                ],
                correct: 2,
                explanation: "I. ifade doğrudur (kusur çalışınca arıza olur). IV. ifade arızanın tanımıdır ve doğrudur. II yanlıştır (debug, hata ayıklama demektir). III yanlıştır (arızalar sadece sözdizimi hatalarından kaynaklanmaz)."
            },
            {
                id: 7,
                week: "Hafta 3",
                text: "Aşağıdaki modellerin hangisinde bir önceki aşamayı geçtikten sonra, daha sonraki aşamalarda sorunların olması durumunda geriye gitme şansımız olmuyor?",
                options: [
                    "V Modeli",
                    "Tekrarlayan Model",
                    "Evrimsel Model",
                    "Agile",
                    "Çağlayan Model"
                ],
                correct: 4,
                explanation: "Çağlayan modeli katı bir şekilde sıralıdır, bir aşama bittikten sonra geri dönülemez."
            },
            {
                id: 8,
                week: "Hafta 3",
                text: "Aşağıdaki diyagram, merkezden başlayıp dışarıya doğru genişleyen ve her turda aynı dört ana adımdan geçen döngüsel bir süreci göstermektedir. Bu diyagram hangi modeli ifade etmektedir?",
                isVisual: true,
                diagram: `<div class="spiral-diagram">
                    <div class="diagram-title">DÖNGÜSEL MODEL DİYAGRAMI</div>
                    <div>[ Hedef Belirleme ]</div>
                    <div>↗ ↑ ↖</div>
                    <div>[Risk Analizi] ← MERKEZ → [Prototipleme]</div>
                    <div>↘ ↓ ↙</div>
                    <div>[ Geliştirme ve Test ] → [ Sonraki Faz Planlaması ]</div>
                    <div class="diagram-subtitle">Her döngü dışarıya doğru genişler</div>
                </div>`,
                options: [
                    "Çağlayan Model",
                    "Tekrarlayan Model",
                    "V Modeli",
                    "Döngüsel (Spiral) Model",
                    "Hiçbiri"
                ],
                correct: 3,
                explanation: "Metinsel diyagram, merkezden başlayarak her döngüde risk analizi ve prototipleme yapan Spiral modelin yapısını göstermektedir."
            },
            {
                id: 9,
                week: "Hafta 4",
                text: "IF … THEN … ELSE …\nDO … WHILE …\n\nYukarıdaki anlatım şeklinin ismi aşağıdakilerden hangisidir?",
                options: [
                    "Sözde Kod (Pseudo Code)",
                    "Yapısal İngilizce",
                    "Kontrol Yapıları",
                    "Ruby programlama dili",
                    "BASIC dili"
                ],
                correct: 1,
                explanation: "Bu yapı, programlama mantığını belirli anahtar kelimelerle ifade eden Yapısal İngilizce'dir."
            },
            {
                id: 10,
                week: "Hafta 4",
                text: "Semantik Versiyonlama nedir?",
                options: [
                    "Yazılımın birleştirilmesidir",
                    "Bir sürüm numaralandırma sistemidir",
                    "Yazılımın müşteri için isimlendirilmesidir",
                    "Hepsi",
                    "Hiçbiri"
                ],
                correct: 1,
                explanation: "Semantik versiyonlama (MAJOR.MINOR.PATCH), yazılım sürümlerini anlamlı bir şekilde numaralandırmak için kullanılır."
            },
            {
                id: 11,
                week: "Hafta 4",
                text: "Aşağıdaki diyagram, bir sistemin hiyerarşik olarak daha küçük modüllere ayrıldığını göstermektedir. Bu yapı, programın fonksiyonel ayrışımını göstermektedir. Bu diyagram hangi türe bir örnektir?",
                isVisual: true,
                diagram: `<div class="structure-chart">
                    <div class="diagram-title">HİYERARŞİK MODÜL YAPISI</div>
                    <div>┌─────────────────┐</div>
                    <div>│   Ana Modül     │</div>
                    <div>└─────────────────┘</div>
                    <div>         │</div>
                    <div>    ┌────┴────┐</div>
                    <div>    │         │</div>
                    <div>┌───────┐ ┌───────┐</div>
                    <div>│Alt    │ │Alt    │</div>
                    <div>│Modül 1│ │Modül 2│</div>
                    <div>└───────┘ └───────┘</div>
                </div>`,
                options: [
                    "Veri akış diyagramı",
                    "Yapısal Çizelgeler",
                    "HIPO Diyagramı",
                    "Yapısal İngilizce",
                    "Hiçbiri"
                ],
                correct: 1,
                explanation: "Gösterilen hiyerarşik yapı, bir sistemin fonksiyonel alt modüllere ayrılışını gösteren Yapısal Çizelgelere (Structure Charts) bir örnektir."
            },
            {
                id: 12,
                week: "Hafta 5",
                text: "Aşağıdaki grafik, bir ürünün yaşam döngüsü boyunca \"Başarısızlık Oranının\" zamana göre değişimini göstermektedir. Eğri önce yüksekten hızla düşer, sonra bir süre yatay ve düşük seyreder, son olarak tekrar yükselişe geçer. Bu \"küvet\" şeklindeki eğri neyi anlatmaktadır?",
                isVisual: true,
                diagram: `<div class="bathtub-curve">
                    <div class="diagram-title">KÜVET EĞRİSİ (BATHTUB CURVE)</div>
                    <div>Başarısızlık ↑</div>
                    <div>Oranı        │ ╲</div>
                    <div>             │  ╲</div>
                    <div>             │   ╲ ____________</div>
                    <div>             │    ╲            ╱</div>
                    <div>             │     ╲__________╱</div>
                    <div>             └────────────────────────→ Zaman</div>
                    <div>                │      │          │</div>
                    <div>              Erken  Kullanım    Aşınma</div>
                    <div>              Arıza   Ömrü       Dönemi</div>
                </div>`,
                options: [
                    "Yazılım Güvenirliği eğrisidir",
                    "Donanım Güvenirliği eğrisidir",
                    "Yazılım Hatalar çizelgesidir",
                    "Hatalar eğrisi",
                    "Donanım güncellemeler eğrisidir"
                ],
                correct: 1,
                explanation: "Küvet (bathtub) eğrisi, donanım ürünlerinin ömrü boyunca sergilediği üç arıza dönemini (erken arıza, rastgele arıza, aşınma) gösterir."
            },
            {
                id: 13,
                week: "Hafta 5",
                text: "Yazılım Güvenirliği ne işe yarar?",
                options: [
                    "Yazılım güvenilirliği, yazılım geliştirme sürecinin en iyi şekilde işlemesi, yazılım ürününün daha iyi ve kaliteli olmasını sağlar.",
                    "Yazılım güvenilirliği, yazılım uygulamanın kullanıcı gereksinimlerine yazılımın hangi çözümler sunabileceğine bakan ve bunun tasarımını yapan süreçtir.",
                    "Yazılımın nasıl yazılmaması gerektiği ile ilgili belgelerin hazırlandığı bir süreçtir.",
                    "Yazılım güvenilirliği, yazılımın güvenli olmasını sağlar."
                ],
                correct: 0,
                explanation: "Yazılım güvenilirliği, yazılım geliştirme sürecinin en iyi şekilde işlemesi, yazılım ürününün daha iyi ve kaliteli olmasını sağlar."
            },
            {
                id: 14,
                week: "Hafta 5",
                text: "Yazılım Güvenirliği nedir?",
                options: [
                    "Yazılım güvenilirliği, yazılım geliştirme sürecinin en iyi şekilde işlemesi, yazılım ürününün daha iyi ve kaliteli olmasını sağlayan süreçtir.",
                    "Yazılım güvenilirliği, yazılım uygulamanın kullanıcı gereksinimlerine yazılımın hangi çözümler sunabileceğine bakan ve bunun tasarımını yapan süreçtir.",
                    "Bir işlevsel birimin, belirli bir zaman aralığında ve verilen şartlar altında istenen işlevi yerine getirme yeteneği.",
                    "Yazılım güvenilirliği, yazılımın güvenli olması demektir."
                ],
                correct: 2,
                explanation: "Bu, TSE'nin güvenilirlik tanımıdır: Bir işlevsel birimin, belirli bir zaman aralığında ve verilen şartlar altında istenen işlevi yerine getirme yeteneği."
            },
            {
                id: 15,
                week: "Hafta 6",
                text: "Proaktif test aşağıdaki yazılım testlerinin hangisidir?",
                options: [
                    "Sistemin belirlenen ihtiyaçları karşılayıp karşılamadığını belirlemek üzere yapılan test türüdür.",
                    "Yazılım geliştirirken yapılan birim testleri, modüllerin testi, entegrasyon testleri ve ürün tamamlandıktan sonra yapılan sistem testlerini içeren test tekniğidir.",
                    "Sistemin bölümlerine yetkisiz erişimleri ve yapılan sızma testleri tespit etmek amacıyla yapılan test türüdür."
                ],
                correct: 1,
                explanation: "Proaktif test, geliştirme sürecinin erken aşamalarında başlayan ve sürekli devam eden bir test yaklaşımıdır."
            },
            {
                id: 16,
                week: "Hafta 6",
                text: "Sistemin bölümlerine yetkisiz erişimleri ve yapılan sızma girişimlerini tespit etmek amacıyla yapılan test türü aşağıdakilerden hangisidir?",
                options: [
                    "Sistem Testi",
                    "Güvenlik Testi",
                    "Birim Testi",
                    "Hepsi",
                    "Hiçbiri"
                ],
                correct: 1,
                explanation: "Güvenlik testi, yetkisiz erişim ve sızma gibi güvenlik açıklarını bulmayı hedefler."
            },
            {
                id: 17,
                week: "Hafta 6",
                text: "Programların ya da modüllerin, sistemin bütünü içinde düzgün çalışıp çalışmadıklarını denetleyen test türü aşağıdakilerden hangisidir?",
                options: [
                    "Birim Testi",
                    "Sistem Testi",
                    "Entegrasyon Testi",
                    "Hepsi",
                    "Hiçbiri"
                ],
                correct: 2,
                explanation: "Modüllerin bir araya geldikten sonraki uyumunu test etme sürecine entegrasyon testi denir."
            },
            {
                id: 18,
                week: "Hafta 7",
                text: "Aşağıdakilerden hangisi yazılım kalitesi özelliklerinden değildir?",
                options: [
                    "Verimlilik",
                    "İşlevsellik",
                    "Güvenilirlik",
                    "Güvenlik",
                    "Hiçbiri"
                ],
                correct: 3,
                explanation: "Güvenlik, İşlevsellik'in bir alt özelliğidir. ISO 9126'daki 6 ana özellik şunlardır: İşlevsellik, Güvenilirlik, Kullanılabilirlik, Verimlilik, Sürdürülebilirlik, Taşınabilirlik."
            },
            {
                id: 19,
                week: "Hafta 7",
                text: "Aşağıdaki özelliklerin hangisi yazılımın belirli bir süre veya belirli bir sayıda işlem için belirlenen koşullarda gerekli görevleri gerçekleştirme yeteneğini tanımlar?",
                options: [
                    "İşlevsellik",
                    "Verimlilik",
                    "Taşınabilirlik",
                    "Sürdürülebilirlik",
                    "Güvenilirlik"
                ],
                correct: 4,
                explanation: "Tanım, yazılımın güvenilirlik özelliğini açıklar."
            },
            {
                id: 20,
                week: "Hafta 7",
                text: "McCabe karmaşıklık ölçütü ne işe yarar?",
                options: [
                    "Programın kod satırlarının sayısını vermek için",
                    "Program kodlarının hataya ne kadar meyilli olduğunu göstermek için",
                    "Değişkenleri tanımlamak ve saymak için",
                    "Yazılım hatalarını artırmak için"
                ],
                correct: 1,
                explanation: "McCabe ölçütü, bir kodun mantıksal karmaşıklığını ve dolayısıyla hata yapma potansiyelini ölçer."
            },
            {
                id: 21,
                week: "Hafta 8",
                text: "Aşağıdakilerden hangisi ISO 9000-3 Sertifikasyon sürecinin bir aşaması değildir?",
                options: [
                    "Kendi kuruluşun SQA sistemini geliştirmek",
                    "Kendi Yazılım Kalite Güvencesi sistemini kullanmak",
                    "Kendi kuruluşun SQA sistemini uygulamak",
                    "Sertifika denetimlerine uğramak",
                    "Sertifika denetimlerine uğramamak"
                ],
                correct: 4,
                explanation: "Sertifika almanın son adımı denetimlere uğramaktır."
            },
            {
                id: 22,
                week: "Hafta 8",
                text: "ISO 9000-3 sertifikasının alınabilmesi için gerekli aşamaları sıralayınız:",
                options: [
                    "- Kendi kuruluşun SQA sistemini geliştirmek; - Kendi kuruluşun SQA sistemini uygulamak; - Sertifika denetimlerine uğramaya hazır olmak.",
                    "- Kuruluşta bir SQA sistemini geliştirmek; - Sertifika denetimlerine uğramaya hazır olmak.",
                    "- Sertifika denetimlerine uğramaya hazır olmak; - SQA sistemini kullanmak; - Kuruluşta bu SQA sistemini uygulamak;"
                ],
                correct: 0,
                explanation: "Sertifikasyon süreci; sistemi geliştirmek, uygulamak ve ardından denetimlere hazır olmaktır."
            },
            {
                id: 23,
                week: "Hafta 8",
                text: "Aşağıdakilerden hangisi standart geliştirme ile ilgili bir organizasyon değildir?",
                options: [
                    "IEEE",
                    "ISA",
                    "ISO",
                    "ANSI"
                ],
                correct: 1,
                explanation: "Sunumda IEEE, ISO, ANSI gibi kurumlar listelenmiş, ISA (International Society of Automation) listelenmemiştir."
            },
            {
                id: 24,
                week: "Hafta 9",
                text: "CASE kısaltımının açılımı aşağıdakilerden hangisidir?",
                options: [
                    "Computer Aided Software Engineering",
                    "Computer And Software Engineering",
                    "Computer Aided Software Examples",
                    "Hiçbiri"
                ],
                correct: 0,
                explanation: "CASE: Computer Aided Software Engineering (Bilgisayar Destekli Yazılım Mühendisliği)"
            },
            {
                id: 25,
                week: "Hafta 9",
                text: "Çeşitli yazılım bileşenleri ve sistem yapısı arasındaki bileşenleri, verileri ve kontrol akışını grafik bir biçimde temsil etmek için kullanılan CASE araçlarının türü aşağıdakilerden hangisidir?",
                options: [
                    "Belgelendirme Araçları (Documentation Tools)",
                    "Süreç Modelleme Araçları (Process Modeling Tools)",
                    "Proje Yönetim Araçları (Project Management Tools)",
                    "Analiz Araçları (Analysis Tool)",
                    "Diyagram Araçları (Diagram Tools)"
                ],
                correct: 4,
                explanation: "Veri akışı, sistem yapısı gibi unsurları grafiksel olarak temsil eden araçlar Diyagram Araçlarıdır."
            },
            {
                id: 26,
                week: "Hafta 9",
                text: "Aşağıdakilerden hangisi CASE araçlarının Prototip hazırlama türünden bir araçtır?",
                options: [
                    "Redmine sistemi",
                    "Mockup hazırlama araçları",
                    "Matlab",
                    "IDE(Integrated Development Environment) araçları",
                    "Blender"
                ],
                correct: 1,
                explanation: "Mockup (makep) araçları, bir ürünün prototipini (ilkel örneğini) oluşturmak için kullanılır."
            },
            {
                id: 27,
                week: "Hafta 9",
                text: "Aşağıdakilerden hangisi bir CASE araçlarından biri değildir?",
                options: [
                    "Derleyiciler",
                    "Hata ayıklayıcılar",
                    "Wine",
                    "Belgelendirme Araçları (Documentation Tools)",
                    "Git"
                ],
                correct: 2,
                explanation: "Wine bir uyumluluk katmanıdır; yazılım geliştirme sürecine doğrudan yardımcı olan bir CASE aracı değildir."
            },
            {
                id: 28,
                week: "Hafta 10",
                text: "I. Risk yönetimi faaliyetlerinin kontrolü\nII. Proje çizelgesi kontrolü\nIII. Proje kaynak kontrolü\nIV. Proje bütçe kontrolü.\n\nProje ilerleme kontrolünün ana bileşenleri yukarıdakilerden hangileridir?",
                options: [
                    "I, II ve IV",
                    "II ve III",
                    "I ve IV",
                    "Hiçbiri",
                    "Hepsi"
                ],
                correct: 4,
                explanation: "Verilen dört madde, proje ilerleme kontrolünün temel bileşenleridir."
            },
            {
                id: 29,
                week: "Hafta 10",
                text: "Belirli bir projeyi tamamlamakla ilgili görevleri analiz etmek ve temsil etmek için bir proje planlama tekniğidir. Etkinlik süresi değişkenliğini içeren bu teknik aşağıdakilerden hangisidir?",
                options: [
                    "CMP",
                    "PERT",
                    "COTS",
                    "Hepsi",
                    "Hiçbiri"
                ],
                correct: 1,
                explanation: "PERT (Program Evaluation and Review Technique), süre belirsizliklerini dikkate alan bir proje planlama tekniğidir."
            },
            {
                id: 30,
                week: "Hafta 10",
                text: "Aşağıdakilerden hangisi Yazılım Kalite Maliyeti konusunda ekonomik veriler temelinde yapılan yönetimlerdendir?",
                options: [
                    "Hata önleme (meydana gelmeden önce) ve hataların tespiti ile ilgili maliyetleri kontrol etmek.",
                    "SQA bütçesinin revize edilmesi ve güncellenmesi için yazılım arızaları, önleme ve değerlendirme maliyetlerinin ekonomik zararlarının kapsamını değerlendirmek.",
                    "SQA faaliyetlerinde planlı artış veya düşüşlerin ekonomik değerlendirmesini veya geçmiş ekonomik performansa dayalı olarak yeni veya güncellenmiş SQA altyapısına yatırım yapmayı kolaylaştırmak.",
                    "Hepsi"
                ],
                correct: 3,
                explanation: "Verilen üç madde de kalite maliyetini yönetme ve analiz etme yaklaşımlarıdır."
            },
            {
                id: 31,
                week: "Hafta 11",
                text: "Aşağıdaki faktör modellerinden hangisi diğer modellerden farklı bir modeldir?",
                options: [
                    "McCall Faktör Modeli",
                    "Evans ve Marciniak'ın faktör modeli",
                    "Rome Laboratory (Rome Labs) Modeli",
                    "Deutsch ve Willis'in faktör modeli",
                    "Hepsi aynı"
                ],
                correct: 2,
                explanation: "Diğerleri genel kalite faktör modelleri iken, Rome Labs modeli özellikle \"güvenilirlik\" ve \"hata yoğunluğu\" öngörümüne odaklanır."
            },
            {
                id: 32,
                week: "Hafta 11",
                text: "Aşağıdakilerden hangisi McCall modelindeki ürün geçiş faktörlerindendir?",
                options: [
                    "Taşınabilirlik",
                    "Esneklik",
                    "Bakım",
                    "Test edilebilirlik",
                    "Verimlilik"
                ],
                correct: 0,
                explanation: "McCall modelinde Taşınabilirlik, Yeniden Kullanılabilirlik ve Birlikte Çalışabilirlik \"ürün geçiş\" faktörleridir."
            },
            {
                id: 33,
                week: "Hafta 11",
                text: "Aşağıdakilerden hangisi McCall modelindeki ürün revizyon faktörlerinden değildir?",
                options: [
                    "Taşınabilirlik",
                    "Test edilebilirlik",
                    "Bakım",
                    "Esneklik",
                    "Bütünlük"
                ],
                correct: 0,
                explanation: "\"Ürün revizyon\" faktörleri Bakım, Esneklik ve Test Edilebilirlik'tir. Taşınabilirlik \"geçiş\" faktörü, Bütünlük ise \"çalışma\" faktörüdür."
            },
            {
                id: 34,
                week: "Hafta 12",
                text: "Aşağıdakilerden hangisi IEEE ana sınıflarından değildir?",
                options: [
                    "Kavramsal Standartlar",
                    "Uygunluk Standartlarına uyumluluk",
                    "Kalite Standartları",
                    "Rehberlik Standartları",
                    "Hiçbiri"
                ],
                correct: 2,
                explanation: "IEEE standartları Kavramsal, Uygunluk ve Rehberlik olarak üçe ayrılır."
            },
            {
                id: 35,
                week: "Hafta 12",
                text: "Aşağıdakilerden hangisi IEEE süreç sınıflarından değildir?",
                options: [
                    "IEEE'de bir süreç sınıflandırılması yoktur",
                    "Birincil yaşam döngüsü süreçleri (\"Primary processes\")",
                    "Yaşam döngüsü süreçlerinin desteklenmesi (\"Supporting processes\")",
                    "Kurumsal yaşam döngüsü süreçleri (\"Organizational processes\")",
                    "Merkezi işlemler süreçleri (\"Central Processes\")"
                ],
                correct: 4,
                explanation: "IEEE 12207'de süreçler Birincil, Destekleyici ve Kurumsal olarak sınıflandırılır."
            },
            {
                id: 36,
                week: "Hafta 12",
                text: "Aşağıdakilerden hangisi IEEE 1028 gözden geçirme standardının sistematik derleme türlerinden değildir?",
                options: [
                    "Test Durumları",
                    "Yönetim Yorumları",
                    "Teknik İncelemeler",
                    "Üstünden hızlı geçme (Walkthrough)",
                    "Hepsi IEEE 1028'in sistematik derleme türleridir."
                ],
                correct: 0,
                explanation: "IEEE 1028 beş tür gözden geçirme tanımlar: Yönetim yorumları, Teknik incelemeler, Denetlemeler (Inspections), Walkthroughs ve Denetimler (Audits)."
            },
            {
                id: 37,
                week: "Hafta 13",
                text: "Altı Sigma (Six Sigma) nedir?",
                options: [
                    "Bir yazılım hayat döngüsü modeli",
                    "Bir kalite standardıdır",
                    "Bir ürün yönetimi yöntembilimidir",
                    "Kalite metrik türüdür",
                    "Bir test ürünüdür"
                ],
                correct: 2,
                explanation: "Altı Sigma, süreçlerdeki hataları azaltarak kaliteyi artıran bir yönetim metodolojisidir."
            },
            {
                id: 38,
                week: "Hafta 13",
                text: "DMAIC yaklaşımının süreç iyileştirme adımlarının hangisi iyileştirme faaliyetlerinin yönünü belirlemesinden sorumludur?",
                options: [
                    "Ölçüm",
                    "İyileştirme",
                    "Kontrol",
                    "Tanım",
                    "Test"
                ],
                correct: 3,
                explanation: "DMAIC döngüsünün ilk adımı \"Define\" (Tanım), problemin ve hedeflerin belirlendiği aşamadır."
            },
            {
                id: 39,
                week: "Hafta 13",
                text: "Aşağıdakilerden hangisi Six Sigma'nın en önemli ve temel odak noktasıdır?",
                options: [
                    "Müşteri odaklı",
                    "Kayıp odaklı",
                    "Hızlı sonuç odaklı",
                    "Sürekli iyileştirmelere odaklanma",
                    "Çalışmadaki azalma ve döngüye odaklanması"
                ],
                correct: 0,
                explanation: "Six Sigma, kusuru müşterinin beklentilerinin karşılanmaması olarak tanımladığı için müşteri odaklıdır."
            },
            {
                id: 40,
                week: "Hafta 14",
                text: "Aşağıdaki verilen iş modellerin hangilerinde \"kalite\" anlayışı aynıdır?",
                options: [
                    "Tıbbi işleri ile Mühendislik işleri",
                    "İnternet Bankacılığı ile Bir yazılım danışmanlığı şirketi",
                    "Üniversite işleri ile İnşaat sektörü işleri",
                    "Hepsinde",
                    "Hiçbirinde"
                ],
                correct: 4,
                explanation: "Sunumda verilen kardiyoloji/yazıcı örneği gibi, her iş modelinin ve sektörün kalite beklentileri farklıdır."
            },
            {
                id: 41,
                week: "Hafta 14",
                text: "Aşağıdakilerden hangisi internetteki iş modellerinin sınıflandırılması arasında yer almamaktadır?",
                options: [
                    "Aracılık (Brokerage)",
                    "Hizmet olarak bir yazılım (SaaS - Software as a Service)",
                    "Reklamcılık (Advertising)",
                    "Ticaret (Merchant)",
                    "Topluluk (Community)"
                ],
                correct: 1,
                explanation: "Michael Rappa'nın temel iş modeli sınıflandırmasında SaaS yer almaz. SaaS bir dağıtım ve gelir modelidir."
            },
            {
                id: 42,
                week: "Hafta 14",
                text: "Ürünün belirli koşullara uygun olarak kullanılması için hakların devri aşağıdakilerden hangisidir?",
                options: [
                    "Kira (Lease)",
                    "Satınalma (Purchase)",
                    "Ölçüm (Metric)",
                    "Lisans (License)",
                    "Hiçbiri"
                ],
                correct: 3,
                explanation: "Lisanslama, mülkiyeti devretmeden, ürünün belirli kurallar çerçevesinde kullanım hakkını vermektir."
            }
        ];

        let currentQuestion = 0;
        let userAnswers = [];
        let showAnswers = false;
        let examFinished = false;

        // Force load questions function
        window.forceLoadQuestions = function() {
            console.log('Force loading questions...');
            const loadingPlaceholder = document.getElementById('loading-placeholder');
            if (loadingPlaceholder) {
                loadingPlaceholder.style.display = 'none';
            }
            
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            loadQuestion();
            updateProgress();
        };

        function initializeExam() {
            // WhatsApp browser compatibility
            console.log('Initializing exam...');
            
            userAnswers = new Array(questions.length).fill(null);
            
            // Hide loading placeholder
            const loadingPlaceholder = document.getElementById('loading-placeholder');
            if (loadingPlaceholder) {
                loadingPlaceholder.style.display = 'none';
            }
            
            // Force container visibility
            const container = document.getElementById('question-container');
            if (container) {
                container.style.display = 'block';
                container.style.visibility = 'visible';
                container.style.opacity = '1';
            }
            
            // Load first question
            setTimeout(() => {
                loadQuestion();
                updateProgress();
            }, 100);
        }

        // Event Listeners Setup (WhatsApp Safe)
        function setupEventListeners() {
            // Answer mode toggle
            const answerModeBtn = document.getElementById('answer-mode-btn');
            if (answerModeBtn) {
                answerModeBtn.addEventListener('click', toggleAnswerMode);
            }

            // Debug button
            const debugBtn = document.getElementById('debug-btn');
            if (debugBtn) {
                debugBtn.addEventListener('click', function() {
                    console.log('Manual initialization triggered');
                    initializeExam();
                });
            }

            // Force load button
            const forceLoadBtn = document.getElementById('force-load-btn');
            if (forceLoadBtn) {
                forceLoadBtn.addEventListener('click', forceLoadQuestions);
            }

            // Navigation buttons
            const prevBtn = document.getElementById('prev-btn');
            if (prevBtn) {
                prevBtn.addEventListener('click', previousQuestion);
            }

            const nextBtn = document.getElementById('next-btn');
            if (nextBtn) {
                nextBtn.addEventListener('click', nextQuestion);
            }

            const finishBtn = document.getElementById('finish-btn');
            if (finishBtn) {
                finishBtn.addEventListener('click', showResults);
            }
        }

        function selectOption(optionIndex) {
            if (!showAnswers) {
                userAnswers[currentQuestion] = optionIndex;
                
                // Re-render to update styling and show explanation if correct
                renderQuestion();
            }
        }

        // DOM API based question rendering (WhatsApp Web compatible)
        function renderQuestion() {
            const container = document.getElementById('question-container');
            if (!container) {
                console.error('Container not found');
                return;
            }

            // Clear old content
            container.textContent = '';
            
            const question = questions[currentQuestion];
            const userAnswer = userAnswers[currentQuestion];
            const isAnswered = userAnswer !== null;
            const isCorrect = isAnswered && userAnswer === question.correct;
            
            // Create main question div
            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question');
            
            // Create header
            const header = document.createElement('div');
            header.classList.add('question-header');
            
            const weekInfo = document.createElement('div');
            weekInfo.classList.add('week-info');
            weekInfo.textContent = question.week;
            
            const questionNumber = document.createElement('div');
            questionNumber.classList.add('question-number');
            questionNumber.textContent = `Soru ${currentQuestion + 1} / ${questions.length}`;
            
            header.appendChild(weekInfo);
            header.appendChild(questionNumber);
            
            // Create question text
            const questionText = document.createElement('div');
            questionText.classList.add('question-text');
            questionText.textContent = question.text;
            
            // Add visual diagram if exists
            if (question.isVisual && question.diagram) {
                const diagramDiv = document.createElement('div');
                diagramDiv.classList.add('diagram');
                diagramDiv.innerHTML = question.diagram; // Safe for diagram content
                questionDiv.appendChild(diagramDiv);
            }
            
            // Create options container
            const optionsDiv = document.createElement('div');
            optionsDiv.classList.add('options');
            
            // Create each option
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.classList.add('option', `option-${index}`);
                optionDiv.dataset.option = index;
                
                // Apply styling based on state
                if (showAnswers) {
                    if (index === question.correct) {
                        optionDiv.classList.add('correct');
                    } else if (userAnswer === index && index !== question.correct) {
                        optionDiv.classList.add('incorrect');
                    }
                } else {
                    // Normal mode - only show if this question is answered
                    if (isAnswered) {
                        if (index === question.correct) {
                            optionDiv.classList.add('answered-correct');
                        } else if (userAnswer === index && index !== question.correct) {
                            optionDiv.classList.add('answered-incorrect');
                        }
                    } else if (userAnswer === index) {
                        optionDiv.classList.add('selected');
                    }
                }
                
                // Create option letter
                const optionLetter = document.createElement('span');
                optionLetter.classList.add('option-letter');
                optionLetter.textContent = `${String.fromCharCode(65 + index)})`;
                
                // Create option text
                const optionText = document.createElement('span');
                optionText.classList.add('option-text');
                optionText.textContent = option;
                
                optionDiv.appendChild(optionLetter);
                optionDiv.appendChild(optionText);
                
                // Add click event listener
                optionDiv.addEventListener('click', () => selectOption(index));
                
                optionsDiv.appendChild(optionDiv);
            });
            
            // Add explanation if in answer mode OR if this question was answered correctly
            if (showAnswers || (isAnswered && isCorrect)) {
                const explanationDiv = document.createElement('div');
                explanationDiv.classList.add('review-explanation');
                
                if (!showAnswers && isCorrect) {
                    // Just answered correctly - show only explanation
                    const explanationText = document.createElement('div');
                    explanationText.innerHTML = `<strong>✅ Doğru!</strong><br>${question.explanation}`;
                    explanationDiv.appendChild(explanationText);
                } else {
                    // Full answer mode
                    const correctLetter = String.fromCharCode(65 + question.correct);
                    const correctAnswerText = document.createElement('strong');
                    correctAnswerText.textContent = `Doğru Cevap: ${correctLetter}) ${question.options[question.correct]}`;
                    
                    const explanationText = document.createElement('div');
                    explanationText.innerHTML = `<strong>Açıklama:</strong> ${question.explanation}`;
                    
                    explanationDiv.appendChild(correctAnswerText);
                    explanationDiv.appendChild(document.createElement('br'));
                    explanationDiv.appendChild(explanationText);
                }
                
                explanationDiv.classList.add('show');
                questionDiv.appendChild(explanationDiv);
            }
            
            // Assemble the question
            questionDiv.appendChild(header);
            questionDiv.appendChild(questionText);
            questionDiv.appendChild(optionsDiv);
            
            // Add to container
            container.appendChild(questionDiv);
            
            // Update navigation
            updateNavigationButtons();
            
            // Scroll to top for mobile
            if (window.scrollTo) {
                window.scrollTo(0, 0);
            }
            
            console.log('Question rendered successfully via DOM API');
        }

        function loadQuestion() {
            console.log('Loading question:', currentQuestion);
            
            // DOM rendering delay for mobile/WhatsApp
            setTimeout(() => {
                renderQuestion();
            }, 50);
        }

        function selectOption(optionIndex) {
            if (!showAnswers) {
                userAnswers[currentQuestion] = optionIndex;
                loadQuestion(); // Reload to show selection
            }
        }

        function updateProgress() {
            const progressText = document.getElementById('progress-text');
            const progressFill = document.getElementById('progress-fill');
            
            progressText.textContent = `Soru ${currentQuestion + 1} / ${questions.length}`;
            const percentage = ((currentQuestion + 1) / questions.length) * 100;
            progressFill.style.width = `${percentage}%`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const finishBtn = document.getElementById('finish-btn');

            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = 'inline-flex';
            } else {
                nextBtn.style.display = 'inline-flex';
                finishBtn.style.display = 'none';
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
                updateProgress();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
                updateProgress();
            }
        }

        function toggleAnswerMode() {
            const btn = document.getElementById('answer-mode-btn');
            showAnswers = !showAnswers;
            
            if (showAnswers) {
                btn.textContent = 'Cevapları Gizle';
                btn.className = 'btn btn-primary';
            } else {
                btn.textContent = 'Cevapları Göster';
                btn.className = 'btn btn-secondary';
            }
            
            loadQuestion();
        }

        function calculateResults() {
            let correct = 0;
            const weekStats = {};
            
            questions.forEach((question, index) => {
                const isCorrect = userAnswers[index] === question.correct;
                if (isCorrect) correct++;
                
                if (!weekStats[question.week]) {
                    weekStats[question.week] = { correct: 0, total: 0 };
                }
                weekStats[question.week].total++;
                if (isCorrect) weekStats[question.week].correct++;
            });

            return {
                score: correct,
                total: questions.length,
                percentage: Math.round((correct / questions.length) * 100),
                weekStats
            };
        }

        function showResults() {
            const results = calculateResults();
            const container = document.getElementById('question-container');
            const navigation = document.querySelector('.navigation');
            const resultsDiv = document.getElementById('results');
            
            container.style.display = 'none';
            navigation.style.display = 'none';
            resultsDiv.classList.add('show');

            let scoreClass = 'score-poor';
            let scoreText = 'Başarısız';
            
            if (results.percentage >= 85) {
                scoreClass = 'score-excellent';
                scoreText = 'Mükemmel!';
            } else if (results.percentage >= 70) {
                scoreClass = 'score-good';
                scoreText = 'İyi!';
            } else if (results.percentage >= 50) {
                scoreClass = 'score-average';
                scoreText = 'Orta';
            }

            const weekBreakdown = Object.entries(results.weekStats).map(([week, stats]) => {
                const weekPercentage = Math.round((stats.correct / stats.total) * 100);
                return `
                    <div class="week-item">
                        <span>${week}</span>
                        <span>${stats.correct}/${stats.total} (%${weekPercentage})</span>
                    </div>
                `;
            }).join('');

            resultsDiv.innerHTML = `
                <div class="score-circle ${scoreClass}">
                    %${results.percentage}
                </div>
                <h2>${scoreText}</h2>
                <p>Toplam ${results.total} sorudan ${results.score} tanesini doğru yanıtladınız.</p>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number">${results.score}</div>
                        <div class="stat-label">Doğru Cevap</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${results.total - results.score}</div>
                        <div class="stat-label">Yanlış Cevap</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">%${results.percentage}</div>
                        <div class="stat-label">Başarı Oranı</div>
                    </div>
                </div>

                <div class="week-breakdown">
                    <h3>Haftalık Performans</h3>
                    ${weekBreakdown}
                </div>

                <div class="result-actions">
                    <button class="btn btn-primary" onclick="showDetailedReview()">
                        Detaylı İnceleme
                    </button>
                    <button class="btn btn-secondary restart-btn" onclick="restartExam()">
                        Sınavı Yeniden Başlat
                    </button>
                </div>

                <div class="answer-review" id="detailed-review">
                    <!-- Detaylı inceleme buraya gelecek -->
                </div>
            `;
        }

        function showDetailedReview() {
            const reviewDiv = document.getElementById('detailed-review');
            
            const reviewHtml = questions.map((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const userLetter = userAnswer !== null ? String.fromCharCode(65 + userAnswer) : 'Cevaplanmadı';
                const correctLetter = String.fromCharCode(65 + question.correct);
                
                return `
                    <div class="review-item ${isCorrect ? 'correct' : 'incorrect'}">
                        <div class="review-question">
                            <strong>Soru ${index + 1} (${question.week}):</strong> ${question.text}
                        </div>
                        <div class="review-answer">
                            <strong>Sizin Cevabınız:</strong> ${userLetter}${userAnswer !== null ? ') ' + question.options[userAnswer] : ''}
                        </div>
                        <div class="review-answer">
                            <strong>Doğru Cevap:</strong> ${correctLetter}) ${question.options[question.correct]}
                        </div>
                        <div class="review-explanation">
                            <strong>Açıklama:</strong> ${question.explanation}
                        </div>
                    </div>
                `;
            }).join('');

            reviewDiv.innerHTML = `
                <h3>Tüm Soruların Detaylı İncelemesi</h3>
                ${reviewHtml}
            `;
            reviewDiv.classList.add('show');
        }

        function restartExam() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            showAnswers = false;
            examFinished = false;
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('question-container').style.display = 'block';
            document.querySelector('.navigation').style.display = 'flex';
            
            const answerBtn = document.getElementById('answer-mode-btn');
            answerBtn.textContent = 'Cevapları Göster';
            answerBtn.className = 'btn btn-secondary';
            
            initializeExam();
        }

        // Initialize when DOM is ready - Enhanced for WhatsApp Web
        function safeInitialize() {
            console.log('Safe initialize starting...');
            
            // Setup all event listeners first
            setupEventListeners();
            
            // Show browser info
            const browserInfo = document.getElementById('browser-info');
            if (browserInfo) {
                const isWhatsApp = /WhatsApp/i.test(navigator.userAgent);
                const isMobile = /Mobile|iPhone|Android/i.test(navigator.userAgent);
                browserInfo.textContent = isWhatsApp ? 'WhatsApp Browser algılandı' : 
                                         isMobile ? 'Mobil browser algılandı' : 'Desktop browser';
            }
            
            // Force start for mobile/WhatsApp browsers with immediate execution
            if (/WhatsApp|Mobile|iPhone|Android/i.test(navigator.userAgent)) {
                console.log('Mobil/WhatsApp ortamı algılandı, sorular otomatik yüklenecek');
                // Immediate execution for WhatsApp Web
                setTimeout(() => {
                    forceLoadQuestions();
                }, 50); // Reduced delay for faster loading
                return;
            }
            
            // Multiple initialization attempts for other browsers
            let attempts = 0;
            const maxAttempts = 3;
            
            function tryInit() {
                attempts++;
                console.log('Init attempt:', attempts);
                
                const container = document.getElementById('question-container');
                const loadingPlaceholder = document.getElementById('loading-placeholder');
                
                if (container && questions && questions.length > 0) {
                    console.log('Container and questions found, initializing...');
                    
                    // Hide loading using DOM API
                    if (loadingPlaceholder) {
                        loadingPlaceholder.style.display = 'none';
                    }
                    
                    initializeExam();
                } else if (attempts < maxAttempts) {
                    console.log('Retrying in 300ms...');
                    setTimeout(tryInit, 300); // Faster retry for better UX
                } else {
                    console.log('Max attempts reached, showing manual load option');
                    // Create manual load interface using DOM API
                    if (loadingPlaceholder) {
                        loadingPlaceholder.textContent = '';
                        
                        const errorContainer = document.createElement('div');
                        errorContainer.classList.add('loading-container');
                        
                        const errorTitle = document.createElement('div');
                        errorTitle.classList.add('error-message');
                        errorTitle.textContent = '🔄 Otomatik yükleme başarısız';
                        
                        const errorDesc = document.createElement('p');
                        errorDesc.classList.add('error-description');
                        errorDesc.textContent = 'Tarayıcınızda sorun yaşanıyor. Manuel olarak başlatabilirsiniz:';
                        
                        const manualBtn = document.createElement('button');
                        manualBtn.id = 'manual-start-btn';
                        manualBtn.classList.add('manual-start-btn');
                        manualBtn.textContent = '📚 Sınavı Başlat';
                        
                        const helpText = document.createElement('div');
                        helpText.classList.add('help-text');
                        helpText.textContent = 'Veya sayfayı yenileyin';
                        
                        errorContainer.appendChild(errorTitle);
                        errorContainer.appendChild(errorDesc);
                        errorContainer.appendChild(manualBtn);
                        errorContainer.appendChild(helpText);
                        
                        loadingPlaceholder.appendChild(errorContainer);
                        
                        // Add event listener to the new button
                        manualBtn.addEventListener('click', forceLoadQuestions);
                    }
                }
            }
            
            // Start immediately for faster loading
            tryInit();
        }

        // Enhanced page load event handlers for better compatibility
        document.addEventListener('readystatechange', () => {
            console.log('Ready state changed:', document.readyState);
            if (document.readyState === 'interactive' || document.readyState === 'complete') {
                safeInitialize();
            }
        });

        // Immediate execution for already loaded pages
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', safeInitialize);
        } else {
            // Page already loaded, initialize immediately
            console.log('Page already loaded, initializing immediately');
            safeInitialize();
        }

        // Backup initialization with window load (especially for Safari mobile)
        window.addEventListener('load', function() {
            console.log('Window load event triggered');
            setTimeout(safeInitialize, 100); // Quick backup check
        });
    </script>
</body>
</html>